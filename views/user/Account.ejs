<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>

    <head>
        <style>
            ul.nav li.nav-item a.nav-link {
                color: black !important; 
            }
    
            ul.nav li.nav-item a.nav-link.active {
                background-color: orange !important;
            }
        </style>
         <style>
            .nav-link {
                color: orange !important; 
            }
    
            .nav-link.active {
                background-color: lightgray;
            }
    
            .nav-link.active {
                color: white; 
            }
        </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="assets2/imgs/theme/logo.jpeg">
    <meta name="author" content="CodePixar">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta charset="UTF-8">
    <title>999bookstore</title>
    <link rel="stylesheet" href="css/linearicons.css">
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/nice-select.css">
    <link rel="stylesheet" href="css/nouislider.min.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/main.css">
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <link rel="stylesheet" href="/assets2/css/maind134.css?v=3.4">
</head>
<body>
	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<a class="navbar-brand logo_h" href="index.html"><img src="img/12345.jpeg" width="100px" style="border-radius: 20px;" alt=""></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
					 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<div class="collapse navbar-collapse offset" id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item active"><a class="nav-link" href="/">Home</a></li>
							<li class="nav-item"><a class="nav-link" href="/bookList">All Books</a></li>
							<li class="nav-item"><a class="nav-link" href="/account">Account</a></li>
							<li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                            <li class="nav-item "><a class="nav-link" href="/account" ><i class="fas fa-user"></i><%=userData.name%></a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="nav-item"><a href="/cart" class="cart"><span class="ti-bag"></span></a></li>
							<li class="nav-item">
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</header>
    <section class="banner-area organic-breadcrumb">
        <div class="container">
            <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
                <div class="col-first">
                    <h1>Account</h1>
                    <nav class="d-flex align-items-center">
                        <a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
                        <a href="category.html">Account</a>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <section class="tracking_box_area section_gap">
        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashboard-menu">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab" href="#dashboard" role="tab" aria-controls="dashboard" aria-selected="false"><i class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false"><i class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab" href="#track-orders" role="tab" aria-controls="track-orders" aria-selected="false"><i class="fi-rs-shopping-cart-check mr-10"></i>Wallet</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true"><i class="fi-rs-marker mr-10"></i>My Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab" href="#account-detail" role="tab" aria-controls="account-detail" aria-selected="true"><i class="fi-rs-user mr-10"></i>Account details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="/logout"><i class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <div class="tab-pane fade active show" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0"><%=userData.name%> </h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>
                                                                <th>Status</th>
                                                                <th>Total</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            
                                                            <% if (orderData && Array.isArray(orderData) && orderData.length > 0) {
                                                                orderData.forEach((orderData) => { %>
                                                                    <tr>
                                                                        <td>#<%= orderData.orderId %></td>
                                                                        <td><%= new Date(orderData.currentData).toLocaleString() %></td>
                                                                        <td><%= orderData.Status %></td>
                                                                        <td>â‚¹<%= orderData.totalAmount %></td>
                                                                        <td><a href="/orderstatus?id=<%= orderData._id %>" class="btn-small d-block">View</a></td>
                                                                    </tr>
                                                            <%  });
                                                            } %>

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="track-orders" role="tabpanel" aria-labelledby="track-orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">My Wallet</h5>
                                            </div>
                                            <div class="card-body contact-from-area">
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <form class="contact-form-style mt-30 mb-50" action="#" method="post">
                                                            <div class="input-style mb-20">
                                                                <h5>Name: <span><%=userData.name%></span></h5>
                                                            </div>
                                                            <div class="input-style mb-20">
                                                                <h5>Phone:<span><%=userData.phone%></span></h5>
                                                            </div>
                                                            <div class="input-style mb-20">
                                                                <input type="text" placeholder="<%=userData.wallet%>" readonly style="font-weight: bold;">
                                                            </div>                                                                                                                                                                                 
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab">
                                        <div class="row">
                                            <% if(userData && userData.address && userData.address.length > 0) { %>
                                                <% userData.address.forEach((address, index) => { %>
                                                    <div class="col-lg-6">
                                                        <div class="card mb-3 mb-lg-0">
                                                            <div class="card-header">
                                                                <h5 class="mb-0">Billing Address</h5>
                                                            </div>
                                                            <div class="card-body">
                                                                <address>
                                                                    <%= address.firstName %> %>,<br>
                                                                    <%= address.City %>,<br> 
                                                                    <%= address.District %>,<br>
                                                                    <%= address.State %>,<br>
                                                                    <%= address.Pincode %>
                                                                </address>
                                                                <div class="d-flex justify-content-between align-items-center">
                                                                    <p class="mb-0">
                                                                        <a href="/editAddress?index=<%= index %>" class="mr-2">Edit</a>
                                                                    </p>
                                                                    <button type="button" class="btn btn-sm btn-link trash-button" style="background-color: orange; border: none;" data-index="<%= index %>">
                                                                        <i class="fas fa-trash-alt text-white"></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <% }) %>
                                            <% } else { %>
                                                <div>No billing addresses found.</div>
                                            <% } %>
                                        </div>
                                        <button id="toggleFormButton" class="btn btn-warning mt-5" data-bs-toggle="modal" data-bs-target="#exampleModal" style="background-color: orange; border:none">Add address</button>
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-body">
                                        <form class="contact_form" id="myForm" action="/addaddress" method="POST" onsubmit="return validateForm()">
                                            <div class="mb-3">
                                                <label for="first"  class="form-label">First name</label>
                                                <input type="text"  class="form-control" id="first" name="fname" >
                                                <span id="firstError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <label for="last" class="form-label">Last name</label>
                                                <input type="text" class="form-control" id="last" name="lname" >
                                                <span id="lastError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <label for="city" class="form-label">City/Town</label>
                                                <input type="text" class="form-control" id="city" name="city" >
                                                <span id="cityError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <label for="district" class="form-label">District</label>
                                                <input type="text" class="form-control" id="district" name="district" >
                                                <span id="districtError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <label for="state" class="form-label">State</label>
                                                <input type="text" class="form-control" id="state" name="state" >
                                                <span id="stateError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <label for="pincode" class="form-label">Pincode</label>
                                                <input type="text" class="form-control" id="zip" name="pincode" >
                                                <span id="pincodeError" class="text-danger"></span>
                                            </div>
                                            <div class="mb-3">
                                                <button type="submit" style="background-color: orange; border: none;" class="btn btn-warning">Submit</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                          <div class="tab-pane fade" id="account-detail" role="tabpanel" aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Account Details</h5>
                                            </div>
                                            <div class="container">
                                                <div class="card-body">
                                                    <form method="post" action="/editProfile" name="profileForm" id="profileForm">
                                                        <div class="row">
                                                            <div class="form-group col-md-6">
                                                                <label>First Name <span class="required">*</span></label>
                                                                <input class="form-control square" value="<%=userData.name%>" name="name" type="text">
                                                            </div>
                                                            <div class="form-group col-md-6">
                                                                <label>Email <span class="required">*</span></label>
                                                                <input  type="email" value="<%=userData.email%>" class="form-control square" name="email">
                                                            </div>
                                                            <div class="form-group col-md-12">
                                                                <label>Phone Number <span class="required">*</span></label>
                                                                <input value="<%=userData.phone%>" name="phone" type="text">
                                                            </div>
                                                            <div class="col-md-12">
                                                                <button type="submit" class="btn btn-fill-out submit" name="submit" value="Submit" style="background-color: orange; border: none;">Save</button>
                                                                <button class="btn btn-fill-out submit" type="button" name="changePassword" id="changePasswordBtn" style="background-color: orange; border: none;">Change Password</button>                                                                                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <div class="modal" id="changePasswordModal">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <form action="/changePassword" method="post" id="changePasswordForm">
                                                            <div class="modal-header">
                                                                <h4 class="modal-title">Change Password</h4>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="row">
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            <label for="currentPassword">Current Password <span class="required">*</span></label>
                                                                            <input class="form-control square" name="currentPassword" id="currentPassword" type="password" >
                                                                            <div id="currentPasswordError" class="error-message text-danger"></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            <label for="newPassword">New Password <span class="required">*</span></label>
                                                                            <input class="form-control square" name="newPassword" id="newPassword" type="password" >
                                                                            <div id="newPasswordError" class="error-message text-danger"></div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-12">
                                                                        <div class="form-group">
                                                                            <label for="confirmPassword">Confirm Password <span class="required">*</span></label>
                                                                            <input class="form-control square" name="confirmPassword" id="confirmPassword" type="password" >
                                                                            <div id="confirmPasswordError" class="error-message text-danger"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-primary" style="background-color: orange; border: none;" onmouseover="this.style.backgroundColor='yellow'" onmouseout="this.style.backgroundColor='orange'">Submit</button>
                                                                <button type="button" class="btn btn-secondary" id="closeModalBtn">Close</button>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </section>
    <%-include('footer')-%>
    <script src="/assets2/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/assets2/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/assets2/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/assets2/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/assets2/js/plugins/slick.js"></script>
    <script src="/assets2/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/assets2/js/plugins/wow.js"></script>
    <script src="/assets2/js/plugins/jquery-ui.js"></script>
    <script src="/assets2/js/plugins/perfect-scrollbar.js"></script>
    <script src="/assets2/js/plugins/magnific-popup.js"></script>
    <script src="/assets2/js/plugins/select2.min.js"></script>
    <script src="/assets2/js/plugins/waypoints.js"></script>
    <script src="/assets2/js/plugins/counterup.js"></script>
    <script src="/assets2/js/plugins/jquery.countdown.min.js"></script>
    <script src="/assets2/js/plugins/images-loaded.js"></script>
    <script src="/assets2/js/plugins/isotope.js"></script>
    <script src="/assets2/js/plugins/scrollup.js"></script>
    <script src="/assets2/js/plugins/jquery.vticker-min.js"></script>
    <script src="/assets2/js/plugins/jquery.theia.sticky.js"></script>
    <script src="/assets2/js/maind134.js?v=3.4"></script>

    <script src="js/vendor/jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
	 crossorigin="anonymous"></script>
	<script src="js/vendor/bootstrap.min.js"></script>
	<script src="js/jquery.ajaxchimp.min.js"></script>
	<script src="js/jquery.nice-select.min.js"></script>
	<script src="js/jquery.sticky.js"></script>
    <script src="js/nouislider.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
	<script src="js/gmaps.min.js"></script>
	<script src="js/main.js"></script>

    <script>
        document.getElementById('toggleFormButton').addEventListener('click', function() {
            const modal = new bootstrap.Modal(document.getElementById('exampleModal'));
            modal.toggle();
        });

        function validateForm() {
            const firstName = document.getElementById('first').value;
            const lastName = document.getElementById('last').value;
            const city = document.getElementById('city').value;
            const district = document.getElementById('district').value;
            const state = document.getElementById('state').value;
            const pincode = document.getElementById('zip').value;

            const nameRegex = /^[A-Za-z]+$/;
            const pincodeRegex = /^\d{6}$/;

            if (!nameRegex.test(firstName)) {
                showError('firstError', 'First name should contain only letters');
                return false;
            } else {
                hideError('firstError');
            }

            if (!nameRegex.test(lastName)) {
                showError('lastError', 'Last name should contain only letters');
                return false;
            } else {
                hideError('lastError');
            }
            if (!nameRegex.test(city)) {
                showError('cityError', 'City should contain only letters');
                return false;
            } else {
                hideError('cityError');
            }

            if (!nameRegex.test(district)) {
                showError('districtError', 'District should contain only letters');
                return false;
            } else {
                hideError('districtError');
            }

            if (!nameRegex.test(state)) {
                showError('stateError', 'State should contain only letters');
                return false;
            } else {
                hideError('stateError');
            }

            if (!pincodeRegex.test(pincode)) {
                showError('pincodeError', 'Pincode should be a 6-digit number');
                return false;
            } else {
                hideError('pincodeError');
            }

            return true; 
        }

        function showError(id, message) {
            const errorElement = document.getElementById(id);
            errorElement.innerText = message;
            errorElement.classList.add('error-message'); 
        }

        function hideError(id) {
            const errorElement = document.getElementById(id);
            errorElement.innerText = '';
            errorElement.classList.remove('error-message'); 
        }
    </script>

    <style>
        .error-message {
            color: red;
        }
    </style>
                </div>
                <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<script>
const trashButtons = document.querySelectorAll('.trash-button');
trashButtons.forEach(button => {
button.addEventListener('click', function() {
const index = this.getAttribute('data-index');

Swal.fire({
title: 'Are you sure?',
text: 'This action will delete the address. Continue?',
icon: 'warning',
showCancelButton: true,
confirmButtonColor: 'orange',
cancelButtonColor: '#d33',
confirmButtonText: 'Yes, delete it!'
}).then((result) => {
if (result.isConfirmed) {
window.location.href = `/deleteAddress?index=${index}`;
}
});
});
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
                        
<script>
document.getElementById('profileForm').addEventListener('submit', function(event) {
event.preventDefault(); 

const createErrorMessage = (field, message) => {
const errorMessage = document.createElement('span');
errorMessage.classList.add('error-message');
errorMessage.style.color = 'red';
errorMessage.textContent = message;

field.parentNode.insertBefore(errorMessage, field.nextSibling);
};

const removeErrorMessages = () => {
const errorMessages = document.querySelectorAll('.error-message');
errorMessages.forEach(errorMessage => errorMessage.remove());
};

const nameField = document.querySelector('input[name="name"]');
const emailField = document.querySelector('input[name="email"]');
const phoneField = document.querySelector('input[name="phone"]');
let isValid = true;

removeErrorMessages(); 

if (!isNaN(nameField.value.trim())) {
createErrorMessage(nameField, 'Name should not be a number');
isValid = false;
}

const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
if (!emailRegex.test(emailField.value.trim())) {
createErrorMessage(emailField, 'Enter a valid email address');
isValid = false;
}

if (phoneField.value.trim().length !== 10 || isNaN(phoneField.value.trim())) {
createErrorMessage(phoneField, 'Phone number should be 10 digits');
isValid = false;
}

if (isValid) {
const name = nameField.value.trim();
const email = emailField.value.trim();
const phone = phoneField.value.trim();

const url = `/editProfile?name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&phone=${encodeURIComponent(phone)}`;

fetch(url, {
method: 'GET',
})
.then(response => {
if (response.ok) {
Swal.fire({
title: 'Changes Saved!',
icon: 'success',
showCancelButton: false,
confirmButtonColor: '#3085d6',
confirmButtonText: 'OK'
}).then((result) => {
if (result.isConfirmed) {
}
});
} else if (response.status === 400) {
response.text().then(errorMessage => {
Swal.fire({
    title: 'Error!',
    text: errorMessage,
    icon: 'error',
    confirmButtonColor: '#3085d6',
    confirmButtonText: 'OK'
});
});
} else {
}
})
.catch(error => {
console.error('Error:', error);
});
}
});

</script>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    $('#changePasswordBtn').on('click', function() {
      $('#changePasswordModal').modal('show');
    });
  
    $('#changePasswordModal').on('hide.bs.modal', function(e) {
      if (e.target === this) {
        $(this).find('form')[0].reset(); 
      }
    });
  
    $('#closeModalBtn').on('click', function() {
      $('#changePasswordModal').modal('hide');
    });
  </script>
 <script>
document.getElementById('changePasswordForm').addEventListener('submit', function(event) {
event.preventDefault();

const currentPassword = document.getElementById('currentPassword').value;
const newPassword = document.getElementById('newPassword').value;
const confirmPassword = document.getElementById('confirmPassword').value;

const errorColor = 'red';
const errorMessageStyle = `color: ${errorColor};`;

const currentPasswordError = document.getElementById('currentPasswordError');
const newPasswordError = document.getElementById('newPasswordError');
const confirmPasswordError = document.getElementById('confirmPasswordError');

currentPasswordError.textContent = '';
newPasswordError.textContent = '';
confirmPasswordError.textContent = '';

let isValid = true;

if (currentPassword.length < 8) {
currentPasswordError.textContent = 'Current password should be at least 8 characters';
currentPasswordError.style = errorMessageStyle;
isValid = false;
}

if (newPassword.length < 8) {
newPasswordError.textContent = 'New password should be at least 8 characters';
newPasswordError.style = errorMessageStyle;
isValid = false;
}

if (confirmPassword.length < 8) {
confirmPasswordError.textContent = 'Confirm password should be at least 8 characters';
confirmPasswordError.style = errorMessageStyle;
isValid = false;
}

if (newPassword !== confirmPassword) {
newPasswordError.textContent = 'New password and confirm password do not match';
newPasswordError.style = errorMessageStyle;
confirmPasswordError.textContent = 'New password and confirm password do not match';
confirmPasswordError.style = errorMessageStyle;
isValid = false;
}

if (isValid) {
fetch(`/changePassword?currentPassword=${encodeURIComponent(currentPassword)}&newPassword=${encodeURIComponent(newPassword)}`, {
method: 'POST',
})
.then(response => {
if (response.ok) {
Swal.fire({
title: 'Password Changed!',
text: 'Your password has been changed successfully.',
icon: 'success',
confirmButtonColor: '#3085d6',
confirmButtonText: 'OK'
}).then(() => {
window.location.reload();
});

} else if (response.status === 400) {
response.json().then(data => {
Swal.fire({
title: 'Error!',
text: data.message || 'Something went wrong!',
icon: 'error',
confirmButtonColor: '#d33',
confirmButtonText: 'OK'
});
});
} else {
}
})
.catch(error => {
console.error('Error:', error);
});
}
});


 </script>
  

    
</body>

</html>